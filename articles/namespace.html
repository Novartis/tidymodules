<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Namespace management • tidymodules</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Namespace management">
<meta property="og:description" content="tidymodules">
<meta property="og:image" content="https://opensource.nibr.com/tidymodules/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidymodules</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tidymodules.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Writing R6 classes and tidymodules</a>
    </li>
    <li>
      <a href="../articles/namespace.html">Namespace management</a>
    </li>
    <li>
      <a href="../articles/communication.html">Cross module communication</a>
    </li>
    <li>
      <a href="../articles/inheritance.html">Inheritance</a>
    </li>
    <li>
      <a href="../articles/session.html">Session management</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Novartis/tidymodules/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Namespace management</h1>
            <h3 class="subtitle"><div style="float:right;">
<i style="color:#285fa4;" class="fas fa-th-large fa-4x"></i>
</div></h3>
                        <h4 class="author">Mustapha Larbaoui</h4>
            
            <h4 class="date">2020-06-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Novartis/tidymodules/blob/master/vignettes/namespace.Rmd"><code>vignettes/namespace.Rmd</code></a></small>
      <div class="hidden name"><code>namespace.Rmd</code></div>

    </div>

    
    
<p>As a reminder, the namespace is an important aspect of shiny module that prevents collision of input and output IDs in your application. The namespace identify each unique instance of the modules and need to be provided by the caller.</p>
<p><code>{tidymodules}</code> can be considered as an object-oriented organisational layer on top of shiny that does conventional module in the background. It does use namespace but make it optional to the users. In other words, you don’t need to remember it!</p>
<div id="optional-namespace-id" class="section level2">
<h2 class="hasAnchor">
<a href="#optional-namespace-id" class="anchor"></a>Optional namespace Id</h2>
<p>In the example below a <code>{tm}</code> module <code>MyMod</code> is defined and called with the <code>new()</code> function and with no arguments supplied.<br>
Printing the instance <code>m</code> to the console shows the structure of the module.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidymodules</span>)
<span class="co">#&gt; Loading required package: shiny</span>
<span class="co">#&gt; Loading required package: R6</span>

<span class="no">MyMod</span> <span class="kw">&lt;-</span> <span class="kw pkg">R6</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(
  <span class="st">"MyMod"</span>,
  <span class="kw">inherit</span> <span class="kw">=</span> <span class="no">TidyModule</span>
)

<span class="no">m</span> <span class="kw">&lt;-</span> <span class="no">MyMod</span>$<span class="fu">new</span>()

<span class="no">m</span>
<span class="co">#&gt; Module Namespace MyMod-1</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span></pre></body></html></div>
<p>The namespace Id for module <code>m</code> above is <code>MyMod-1</code>. It is a unique Id generated by <code>{tidymodules}</code> and composed of the class name and the initialisation order of the module.</p>
</div>
<div id="user-defined-namespace-id" class="section level2">
<h2 class="hasAnchor">
<a href="#user-defined-namespace-id" class="anchor"></a>User defined namespace Id</h2>
<p>The user can also provide a more informative name when initialising a module.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">
<span class="no">m</span> <span class="kw">&lt;-</span> <span class="no">MyMod</span>$<span class="fu">new</span>(<span class="st">"Tom"</span>)

<span class="no">m</span>
<span class="co">#&gt; Module Namespace Tom</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span></pre></body></html></div>
<p><code>Tom</code> end up being the namespace Id of <code>m</code>.</p>
<p>The provided name must begin with a letter <code>[A-Za-z]</code> and may be followed by any number of letters, digits <code>[0-9]</code>, hyphens <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code>, underscores <code>_</code>. You should not use the following characters as they have a special meaning on the UI ( CSS / jQuery ).</p>
<blockquote>
<p>~ ! @ $ % ^ &amp; * ( ) + = , . / ’ ; : " ? &gt; &lt; [ ]  { } | ` #</p>
</blockquote>
</div>
<div id="namespace-and-nested-modules" class="section level2">
<h2 class="hasAnchor">
<a href="#namespace-and-nested-modules" class="anchor"></a>Namespace and nested modules</h2>
<p>The code below illustrates a very simple example of nested module and the corresponding namespace Ids. Here are few things to note about this example:</p>
<ul>
<li>
<code>ModA</code> and <code>ModB</code> are both <code>{tm}</code> classes as they both inherit from <code><a href="../reference/TidyModule.html">tidymodules::TidyModule</a></code>
</li>
<li>
<code>ModB</code> is used as a nested class of <code>ModA</code>
</li>
<li>
<code>ModA</code> has a public field named <code>nested_mod</code>
</li>
<li>The namespace of a nested module is always prefixed with its parent</li>
</ul>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">ModB</span> <span class="kw">&lt;-</span> <span class="kw pkg">R6</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(
  <span class="st">"ModB"</span>,
  <span class="kw">inherit</span> <span class="kw">=</span> <span class="no">TidyModule</span>
)

<span class="no">ModA</span> <span class="kw">&lt;-</span> <span class="kw pkg">R6</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(
  <span class="st">"ModA"</span>,
  <span class="kw">inherit</span> <span class="kw">=</span> <span class="no">TidyModule</span>,
  <span class="kw">public</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">nested_mod</span> <span class="kw">=</span> <span class="kw">NULL</span>,
    <span class="kw">initialize</span> <span class="kw">=</span> <span class="kw">function</span>(<span class="no">...</span>){
      <span class="no">super</span>$<span class="fu">initialize</span>(<span class="no">...</span>)
      <span class="no">self</span>$<span class="no">nested_mod</span> <span class="kw">&lt;-</span> <span class="no">ModB</span>$<span class="fu">new</span>()
    }
  )
)

<span class="no">m</span> <span class="kw">&lt;-</span> <span class="no">ModA</span>$<span class="fu">new</span>()
<span class="no">n</span> <span class="kw">&lt;-</span> <span class="no">m</span>$<span class="no">nested_mod</span>

<span class="no">m</span>
<span class="co">#&gt; Module Namespace ModA-3</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class ModA &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span>
<span class="no">n</span>
<span class="co">#&gt; Module Namespace ModA-3-ModB-4</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class ModB &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span></pre></body></html></div>
</div>
<div id="grouping-modules" class="section level2">
<h2 class="hasAnchor">
<a href="#grouping-modules" class="anchor"></a>Grouping modules</h2>
<p>This option allows the grouping of <code>{tm}</code> modules together to facilitate their retrieval from the <code>ModStore</code> and to better visualize them later in a network diagram.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">
<span class="no">ta</span> <span class="kw">&lt;-</span> <span class="no">MyMod</span>$<span class="fu">new</span>(<span class="st">"Tom"</span>,<span class="kw">group</span> <span class="kw">=</span> <span class="st">"A"</span>)
<span class="no">tb</span> <span class="kw">&lt;-</span> <span class="no">MyMod</span>$<span class="fu">new</span>(<span class="st">"Tom"</span>,<span class="kw">group</span> <span class="kw">=</span> <span class="st">"B"</span>)

<span class="no">ta</span>
<span class="co">#&gt; Module Namespace A-Tom</span>
<span class="co">#&gt; Module Group A</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span>
<span class="no">tb</span>
<span class="co">#&gt; Module Namespace B-Tom</span>
<span class="co">#&gt; Module Group B</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span></pre></body></html></div>
<p>As you can see above the group argument is used to define the final namespace Id of the modules. Those modules share the same name but have different namespace IDs.</p>
</div>
<div id="modules-ids-and-ui-function" class="section level2">
<h2 class="hasAnchor">
<a href="#modules-ids-and-ui-function" class="anchor"></a>module’s IDs and UI function</h2>
<p>A <code>{tm}</code> module namespace is a concatenation of many fields.</p>
<ul>
<li>Some are optional fields: <code>name</code> and <code>group</code>
</li>
<li>And some are managed by <code>{tidymodules}</code>: <code>id</code>, <code>parent_ns</code> and <code>module_ns</code>
</li>
</ul>
<p>the module’s namespace is built like this</p>
<pre><code>id = &lt;group&gt;_&lt;name&gt;
module_ns = &lt;parent_ns&gt;_&lt;id&gt;</code></pre>
<div class="sourceCode" id="cb6"><html><body><pre class="r">
<span class="co">#' @field name Name of the module, either generated for or provided by the user.</span>
<span class="no">n</span>$<span class="no">name</span>
<span class="co">#&gt; [1] "ModB-4"</span>
<span class="no">ta</span>$<span class="no">name</span>
<span class="co">#&gt; [1] "Tom"</span>

<span class="co">#' @field group Group name of the module.</span>
<span class="no">n</span>$<span class="no">group</span>
<span class="co">#&gt; NULL</span>
<span class="no">ta</span>$<span class="no">group</span>
<span class="co">#&gt; [1] "A"</span>

<span class="co">#' @field id ID of the module. </span>
<span class="no">n</span>$<span class="no">id</span>
<span class="co">#&gt; [1] "ModB-4"</span>
<span class="no">ta</span>$<span class="no">id</span>
<span class="co">#&gt; [1] "A-Tom"</span>

<span class="co">#' @field parent_ns Parent module namespace in case of nested modules.</span>
<span class="no">n</span>$<span class="no">parent_ns</span>
<span class="co">#&gt; [1] "ModA-3"</span>
<span class="no">ta</span>$<span class="no">parent_ns</span>
<span class="co">#&gt; NULL</span>

<span class="co">#' @field module_ns Module namespace, unique identifier for the module.</span>
<span class="no">n</span>$<span class="no">module_ns</span>
<span class="co">#&gt; [1] "ModA-3-ModB-4"</span>
<span class="no">ta</span>$<span class="no">module_ns</span>
<span class="co">#&gt; [1] "A-Tom"</span></pre></body></html></div>
<p>Like in conventional module, <code>{tm}</code> module also requires wrapping UI elements with the namespace. The function named <code>ns()</code> available in all <code>{tm}</code> modules should be used to namespace the inputs. As you can see in the example below, you simply need to call the function using the <code>self</code> R6 keyword. There is no need to remember the modules’s namespace anymore.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">
<span class="no">MyMod</span> <span class="kw">&lt;-</span> <span class="kw pkg">R6</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(
  <span class="st">"MyMod"</span>,
  <span class="kw">inherit</span> <span class="kw">=</span> <span class="no">TidyModule</span>,
  <span class="kw">public</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">ui</span> <span class="kw">=</span> <span class="kw">function</span>(){
      <span class="kw pkg">shiny</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tag.html">tagList</a></span>(
        <span class="kw pkg">shiny</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/numericInput.html">numericInput</a></span>(<span class="no">self</span>$<span class="fu">ns</span>(<span class="st">"inputId"</span>),<span class="kw">NULL</span>,<span class="fl">0</span>)
      )
    }
  )
)

<span class="no">m</span> <span class="kw">&lt;-</span> <span class="no">MyMod</span>$<span class="fu">new</span>()
<span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="no">m</span>$<span class="fu">ui</span>())
<span class="co">#&gt; [1] "&lt;div class=\"form-group shiny-input-container\"&gt;\n  &lt;label class=\"control-label shiny-label-null\" for=\"MyMod-7-inputId\"&gt;&lt;/label&gt;\n  &lt;input id=\"MyMod-7-inputId\" type=\"number\" class=\"form-control\" value=\"0\"/&gt;\n&lt;/div&gt;"</span></pre></body></html></div>
</div>
<div id="modstore-and-module-lookup" class="section level2">
<h2 class="hasAnchor">
<a href="#modstore-and-module-lookup" class="anchor"></a><code>ModStore</code> and module lookup</h2>
<p>The <code>ModStore</code> is an internal repository for all <code>{tm}</code> modules and connections (see <a href="communication.html">communication article</a> for learning how to connect modules). It is a shared environment created by <code>{tidymodules}</code> that orginizes the objects (modules and edges) by applications and sessions. This allows to track and easily retrieve the modules anywhere in the application.</p>
<p>All the examples above show the creation of modules with the <code>new()</code> R6 function and the assignment to variables (pointers to the R6 objects). However <code>{tidymodules}</code> also offers the choice to not save module references and instead use the <code><a href="../reference/getMod.html">getMod()</a></code> or <code><a href="../reference/mod.html">mod()</a></code> utility functions to retrieve existing module. Note that <code><a href="../reference/mod.html">mod()</a></code> is just an alias of <code><a href="../reference/getMod.html">getMod()</a></code>.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r">
<span class="no">MyMod</span>$<span class="fu">new</span>(<span class="st">"SaveMeInStore"</span>)
<span class="co">#&gt; Module Namespace SaveMeInStore</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span>

<span class="co"># look-up by namespace ID</span>
<span class="fu"><a href="../reference/mod.html">mod</a></span>(<span class="st">"SaveMeInStore"</span>)
<span class="co">#&gt; Module Namespace SaveMeInStore</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span>

<span class="co"># look-up by index </span>
<span class="fu"><a href="../reference/mod.html">mod</a></span>(<span class="fl">2</span>)
<span class="co">#&gt; Module Namespace Tom</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span>

<span class="co"># look-up by index within a group</span>
<span class="fu"><a href="../reference/mod.html">mod</a></span>(<span class="fl">1</span>,<span class="kw">group</span><span class="kw">=</span><span class="st">"A"</span>)
<span class="co">#&gt; Module Namespace A-Tom</span>
<span class="co">#&gt; Module Group A</span>
<span class="co">#&gt; Module Session global_session</span>
<span class="co">#&gt; - Class MyMod &lt;&lt; TidyModule &lt;&lt; R6</span>
<span class="co">#&gt; - Input [0]</span>
<span class="co">#&gt; - Output [0]</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mustapha Larbaoui.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
