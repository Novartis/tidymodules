<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with writing tidymodules • tidymodules</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with writing tidymodules">
<meta property="og:description" content="">
<meta property="og:image" content="https://opensource.nibr.com/tidymodules/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidymodules</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tidymodules.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Writing R6 classes and tidymodules</a>
    </li>
    <li>
      <a href="../articles/namespace.html">Namespace management</a>
    </li>
    <li>
      <a href="../articles/communication.html">Cross module communication</a>
    </li>
    <li>
      <a href="../articles/inheritance.html">Inheritance</a>
    </li>
    <li>
      <a href="../articles/session.html">Session management</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Novartis/tidymodules">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting started with writing tidymodules</h1>
            <h3 class="subtitle"><div style="float:right;">
<i style="color:#285fa4;" class="fas fa-laptop-code fa-4x"></i>
</div></h3>
                        <h4 class="author">Xiao Ni, Mustapha Larbaoui</h4>
            
            <h4 class="date">2020-02-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Novartis/tidymodules/blob/master/vignettes/intro.Rmd"><code>vignettes/intro.Rmd</code></a></small>
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div id="a-quick-introduction-to-r6-and-object-oriented-programming-oop" class="section level2">
<h2 class="hasAnchor">
<a href="#a-quick-introduction-to-r6-and-object-oriented-programming-oop" class="anchor"></a>A quick introduction to R6 and Object Oriented Programming (OOP)</h2>
<p>Tidymodules is based R6 (<a href="https://r6.r-lib.org/" class="uri">https://r6.r-lib.org/</a>), which is an implementation of encapsulated object-oriented programming for R. Therefore knowledge of R6 is a prerequisite for using tidymodules to develop Shiny modules.</p>
<p>R6 provides a framework for OOP in R. Unlike the functional programming style, R6 encapsulate methods and fields in classes that instantiate into objects. R6 classes are similar to R’s reference classes, but are more efficient and do not depend on S4 classes and the methods package.</p>
<p>This vignette provides a brief overview of R6 for developers new to R6. For more information, developers are recommended to review the R6 packagedown site (<a href="https://r6.r-lib.org/" class="uri">https://r6.r-lib.org/</a>), as well as Chapter 14 of the Advanced R book (<a href="https://adv-r.hadley.nz/r6.html" class="uri">https://adv-r.hadley.nz/r6.html</a>)</p>
<div id="r6-classes-and-methods" class="section level3">
<h3 class="hasAnchor">
<a href="#r6-classes-and-methods" class="anchor"></a>R6 classes and methods</h3>
<p>Tidymodules depends on the R6 package which you can install from CRAN and load:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(R6)</a></code></pre></div>
<p>R6 classes are created using the <a href="https://r6.r-lib.org/reference/R6Class.html"><code><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6::R6Class()</a></code> function</a>, which is the only function from the R6 package that is typically used. The following is a simple example of defining an R6 class:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">Calculator &lt;-<span class="st"> </span>R6<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  <span class="dt">classname =</span> <span class="st">"Calculator"</span>, </a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="dt">public =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="dt">value =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="dt">initialize =</span> <span class="cf">function</span>(value) {</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">      self<span class="op">$</span>value &lt;-<span class="st"> </span>value</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">    },</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="dt">add =</span> <span class="cf">function</span>(<span class="dt">x =</span> <span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">      self<span class="op">$</span>value &lt;-<span class="st"> </span>self<span class="op">$</span>value <span class="op">+</span><span class="st"> </span>x </a>
<a class="sourceLine" id="cb2-10" data-line-number="10">      <span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(self)</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">    })</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">)</a></code></pre></div>
<p>The first argument <code>classname</code> by convention uses <code>UpperCamelCase</code>. The second argument <code>public</code> encapsulates a list of methods (functions) and fields (objects) that make up the public interface of the object. By convention methods and fields use <code>snake_case</code>. Methods can access the methods and fields of the current object using <code>self$</code>. One should always assign the result of <code><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class()</a></code> into a variable with the same names as the <code>classname</code> because <code><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class()</a></code> returns an R6 object that defines the class.</p>
<p>You can print the class definition:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">Calculator</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; &lt;Calculator&gt; object generator</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;   Public:</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;     value: NA</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;     initialize: function (value) </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;     add: function (x = 1) </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;     clone: function (deep = FALSE) </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;   Parent env: &lt;environment: R_GlobalEnv&gt;</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;   Locked objects: TRUE</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;   Locked class: FALSE</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;   Portable: TRUE</span></a></code></pre></div>
<p>To create a new instance of <code>Calculator</code>, use the <code>$new()</code> method. The <code>$initialize()</code> is an important method, which overrides the default behavior of <code>$new()</code>. In the above example, the <code>$initialize()</code> method initializes the <code>calculator1</code> object with <code>value = 0</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">calculator1 &lt;-<span class="st"> </span>Calculator<span class="op">$</span><span class="kw">new</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">calculator1</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; &lt;Calculator&gt;</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;   Public:</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;     add: function (x = 1) </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;     clone: function (deep = FALSE) </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;     initialize: function (value) </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;     value: 0</span></a></code></pre></div>
<p>You can then call the methods and access fields using <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">calculator1<span class="op">$</span><span class="kw">add</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">calculator1<span class="op">$</span>value</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; [1] 10</span></a></code></pre></div>
<p>You can also add methods after class creation as illustrated below for the existing <code>Calculator</code> R6 class, although new methods and fields are only available to new objects.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">Calculator<span class="op">$</span><span class="kw">set</span>(<span class="st">"public"</span>, <span class="st">"subtract"</span>, <span class="cf">function</span>(<span class="dt">x=</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  self<span class="op">$</span>value &lt;-<span class="st"> </span>self<span class="op">$</span>value <span class="op">-</span><span class="st"> </span>x</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(self)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">})</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">Calculator</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; &lt;Calculator&gt; object generator</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;   Public:</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;     value: NA</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;     initialize: function (value) </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;     add: function (x = 1) </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;     clone: function (deep = FALSE) </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;     subtract: function (x = 1) </span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;   Parent env: &lt;environment: R_GlobalEnv&gt;</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;   Locked objects: TRUE</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;   Locked class: FALSE</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;   Portable: TRUE</span></a></code></pre></div>
<p>Below are some key features of R6.</p>
<ul>
<li>
<strong>Reference semantics</strong>: objects are not copied when modified. R6 provides a <code>$clone()</code> method for making copy of an object. For more details, refer to <a href="https://r6.r-lib.org/reference/R6Class.html#cloning-objects" class="uri">https://r6.r-lib.org/reference/R6Class.html#cloning-objects</a>.</li>
<li>
<strong>Public vs. private members</strong>: <code><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class()</a></code> has a <code>private</code> argument for you to define private methods and fileds that can only be accessed from within the class, not from the outside.</li>
<li>
<strong>Inheritance</strong>: as in classical OOP, one R6 class can inherit from another R6 class. Superclass methods can be accessed with <code>super$</code>.</li>
</ul>
</div>
</div>
<div id="tidymodulestidymodule-class" class="section level2">
<h2 class="hasAnchor">
<a href="#tidymodulestidymodule-class" class="anchor"></a><code>tidymodules::TidyModule</code> class</h2>
<p>The <code><a href="../reference/TidyModule.html">tidymodules::TidyModule</a></code> class inherits from <code>R6Class</code> and is the parent of all tidymodules modules.</p>
<p>Below is partial code of the <code>TidyModule</code> class for illustration purpose. <code>TidyModule</code> includes public methods such as <code>ui()</code>, <code>server()</code>, <code><a href="../reference/callModules.html">callModules()</a></code>, and <code>definePorts()</code> etc.</p>
<p>Unlike conventional Shiny modules in funtional programming style, tidymodules encapsulates functions such as ui() and server() as methods in a TidyModule class object. Module namespace ID is seamlessly managed within the module class for the ui and server. For complete technical documentation include other methods and fields, see <code><a href="../reference/TidyModule.html">?TidyModule</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">TidyModule &lt;-<span class="st"> </span>R6<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  <span class="st">"TidyModule"</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="dt">public =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">    <span class="dt">id =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">    <span class="dt">module_ns =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">    <span class="dt">parent_ns =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    <span class="dt">parent_mod =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">    <span class="dt">parent_ports =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">    <span class="dt">group =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">    <span class="dt">created =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">    <span class="dt">o =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">    <span class="dt">i =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">    <span class="dt">initialize =</span> <span class="cf">function</span>(<span class="dt">id =</span> <span class="ot">NULL</span>, <span class="dt">inherit =</span> <span class="ot">TRUE</span>, <span class="dt">group =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb7-14" data-line-number="14">      <span class="co"># details omitted</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">    },</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">    <span class="co"># Other methods such</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17">    <span class="dt">ui =</span> <span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(shiny<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/tag.html">tagList</a></span>())</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">    },</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">    <span class="dt">server =</span> <span class="cf">function</span>(input, </a>
<a class="sourceLine" id="cb7-21" data-line-number="21">                      output, </a>
<a class="sourceLine" id="cb7-22" data-line-number="22">                      session){</a>
<a class="sourceLine" id="cb7-23" data-line-number="23">      <span class="co"># Need to isolate this block to avoid unecessary triggers</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24">      shiny<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/isolate.html">isolate</a></span>({</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">        private<span class="op">$</span>shiny_session &lt;-<span class="st"> </span>session</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">        private<span class="op">$</span>shiny_input &lt;-<span class="st"> </span>input</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">        private<span class="op">$</span>shiny_output &lt;-<span class="st"> </span>output</a>
<a class="sourceLine" id="cb7-28" data-line-number="28">      })</a>
<a class="sourceLine" id="cb7-29" data-line-number="29">    },</a>
<a class="sourceLine" id="cb7-30" data-line-number="30">    <span class="dt">definePort =</span> <span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb7-31" data-line-number="31">      shiny<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/isolate.html">isolate</a></span>(x)</a>
<a class="sourceLine" id="cb7-32" data-line-number="32">    },</a>
<a class="sourceLine" id="cb7-33" data-line-number="33">    <span class="dt">assignPort =</span> <span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb7-34" data-line-number="34">      shiny<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/observe.html">observe</a></span>({</a>
<a class="sourceLine" id="cb7-35" data-line-number="35">        shiny<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/shiny/man/isolate.html">isolate</a></span>(x)</a>
<a class="sourceLine" id="cb7-36" data-line-number="36">      })</a>
<a class="sourceLine" id="cb7-37" data-line-number="37">    },</a>
<a class="sourceLine" id="cb7-38" data-line-number="38">    <span class="co"># Other public methods omitted </span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39">  ),</a>
<a class="sourceLine" id="cb7-40" data-line-number="40">  <span class="dt">private =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(  </a>
<a class="sourceLine" id="cb7-41" data-line-number="41">    <span class="co"># Details omitted</span></a>
<a class="sourceLine" id="cb7-42" data-line-number="42">  )</a>
<a class="sourceLine" id="cb7-43" data-line-number="43">)</a>
<a class="sourceLine" id="cb7-44" data-line-number="44">      </a></code></pre></div>
</div>
<div id="writing-your-first-tidymodules-shiny-module" class="section level2">
<h2 class="hasAnchor">
<a href="#writing-your-first-tidymodules-shiny-module" class="anchor"></a>Writing your first tidymodules Shiny module</h2>
<p>You can develop new tidymodules Shiny modules by inheriting and extending the <code><a href="../reference/TidyModule.html">tidymodules::TidyModule</a></code> class.</p>
<p>Below is a minimal example, <code>RandomNumberGenerator</code>, with one input port and one output port. The input port is a random number seed that feeds into a random number generator, whose result serves as the module output.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Module definition</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">RandomNumMod &lt;-<span class="st"> </span>R6<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="st">"RandomNumGenerator"</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="dt">inherit =</span> tidymodules<span class="op">::</span>TidyModule,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="dt">public =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">    <span class="dt">initialize =</span> <span class="cf">function</span>(<span class="dt">id =</span> <span class="ot">NULL</span>){</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">      super<span class="op">$</span><span class="kw">initialize</span>(id)</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">     </a>
<a class="sourceLine" id="cb8-9" data-line-number="9">      self<span class="op">$</span><span class="kw">definePort</span>({</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">        self<span class="op">$</span><span class="kw">addInputPort</span>(</a>
<a class="sourceLine" id="cb8-11" data-line-number="11">          <span class="dt">name =</span> <span class="st">"seed"</span>,</a>
<a class="sourceLine" id="cb8-12" data-line-number="12">          <span class="dt">description =</span> <span class="st">"random number seed"</span>,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">          <span class="dt">sample =</span> <span class="dv">123</span>)</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">       </a>
<a class="sourceLine" id="cb8-15" data-line-number="15">        self<span class="op">$</span><span class="kw">addOutputPort</span>(</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">          <span class="dt">name =</span> <span class="st">"number"</span>,</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">          <span class="dt">description =</span> <span class="st">"Random number"</span>,</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">          <span class="dt">sample =</span> <span class="dv">123</span>)</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">      })</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">    },</a>
<a class="sourceLine" id="cb8-21" data-line-number="21">    <span class="dt">ui =</span> <span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb8-22" data-line-number="22">      <span class="kw">tagList</span>(</a>
<a class="sourceLine" id="cb8-23" data-line-number="23">        <span class="kw">verbatimTextOutput</span>(self<span class="op">$</span><span class="kw">ns</span>(<span class="st">"text"</span>))</a>
<a class="sourceLine" id="cb8-24" data-line-number="24">      )</a>
<a class="sourceLine" id="cb8-25" data-line-number="25">    },</a>
<a class="sourceLine" id="cb8-26" data-line-number="26">    <span class="dt">server =</span> <span class="cf">function</span>(input, output, session){</a>
<a class="sourceLine" id="cb8-27" data-line-number="27">     </a>
<a class="sourceLine" id="cb8-28" data-line-number="28">      super<span class="op">$</span><span class="kw">server</span>(input,output,session)</a>
<a class="sourceLine" id="cb8-29" data-line-number="29">     </a>
<a class="sourceLine" id="cb8-30" data-line-number="30">      result &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb8-31" data-line-number="31">        s &lt;-<span class="st"> </span>self<span class="op">$</span><span class="kw">getInput</span>(<span class="st">"seed"</span>)</a>
<a class="sourceLine" id="cb8-32" data-line-number="32">        <span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="kw">s</span>())</a>
<a class="sourceLine" id="cb8-33" data-line-number="33">        <span class="kw"><a href="https://rdrr.io/r/base/Round.html">floor</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">1</span>)<span class="op">*</span><span class="fl">1e5</span>)</a>
<a class="sourceLine" id="cb8-34" data-line-number="34">      })</a>
<a class="sourceLine" id="cb8-35" data-line-number="35">     </a>
<a class="sourceLine" id="cb8-36" data-line-number="36">      output<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb8-37" data-line-number="37">        s &lt;-<span class="st"> </span>self<span class="op">$</span><span class="kw">getInput</span>(<span class="st">"seed"</span>)</a>
<a class="sourceLine" id="cb8-38" data-line-number="38">        <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"seed = "</span>, <span class="kw">s</span>()))</a>
<a class="sourceLine" id="cb8-39" data-line-number="39">        <span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"number = "</span>, <span class="kw">result</span>()))</a>
<a class="sourceLine" id="cb8-40" data-line-number="40">      })</a>
<a class="sourceLine" id="cb8-41" data-line-number="41">     </a>
<a class="sourceLine" id="cb8-42" data-line-number="42">      self<span class="op">$</span><span class="kw">assignPort</span>({</a>
<a class="sourceLine" id="cb8-43" data-line-number="43">        self<span class="op">$</span><span class="kw">updateOutputPort</span>(</a>
<a class="sourceLine" id="cb8-44" data-line-number="44">          <span class="dt">id =</span> <span class="st">"number"</span>,</a>
<a class="sourceLine" id="cb8-45" data-line-number="45">          <span class="dt">output =</span> result)</a>
<a class="sourceLine" id="cb8-46" data-line-number="46">      })</a>
<a class="sourceLine" id="cb8-47" data-line-number="47">      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(result)</a>
<a class="sourceLine" id="cb8-48" data-line-number="48">    }</a>
<a class="sourceLine" id="cb8-49" data-line-number="49">  )</a>
<a class="sourceLine" id="cb8-50" data-line-number="50">)</a></code></pre></div>
<p>Cross-communication between two tidymodules modules is established using several flavours of the pipe <code>%&gt;%</code> operator, as illustrated in the following code. The first module’s output is fed as the random number seed for the second module.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">## Calling app</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">randomNumMod1 &lt;-<span class="st"> </span>RandomNumMod<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">randomNumMod2 &lt;-<span class="st"> </span>RandomNumMod<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"> </a>
<a class="sourceLine" id="cb9-5" data-line-number="5">ui &lt;-<span class="st"> </span><span class="kw">tagList</span>(</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">    randomNumMod1<span class="op">$</span><span class="kw">ui</span>(),</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">    randomNumMod2<span class="op">$</span><span class="kw">ui</span>()</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">  )</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</a>
<a class="sourceLine" id="cb9-12" data-line-number="12"> </a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  randomNumMod1<span class="op">$</span><span class="kw">callModule</span>()</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">  randomNumMod2<span class="op">$</span><span class="kw">callModule</span>()</a>
<a class="sourceLine" id="cb9-15" data-line-number="15"> </a>
<a class="sourceLine" id="cb9-16" data-line-number="16">  seed_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">reactive</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"> </a>
<a class="sourceLine" id="cb9-18" data-line-number="18">  <span class="kw">observe</span>({</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">    seed_<span class="dv">1</span> <span class="op">%&gt;1%</span><span class="st"> </span>randomNumMod1 <span class="op">%1&gt;1%</span><span class="st"> </span>randomNumMod2</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">  })</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">}</a>
<a class="sourceLine" id="cb9-22" data-line-number="22"> </a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
</div>
<div id="next-steps" class="section level2">
<h2 class="hasAnchor">
<a href="#next-steps" class="anchor"></a>Next steps</h2>
<p>To learn more about writing tidymodules modules, read the examples.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#a-quick-introduction-to-r6-and-object-oriented-programming-oop">A quick introduction to R6 and Object Oriented Programming (OOP)</a></li>
      <li><a href="#tidymodulestidymodule-class"><code>tidymodules::TidyModule</code> class</a></li>
      <li><a href="#writing-your-first-tidymodules-shiny-module">Writing your first tidymodules Shiny module</a></li>
      <li><a href="#next-steps">Next steps</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mustapha Larbaoui.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
